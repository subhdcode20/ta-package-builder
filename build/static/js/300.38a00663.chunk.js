"use strict";(self.webpackChunkta_package_builder=self.webpackChunkta_package_builder||[]).push([[300],{2300:(e,l,i)=>{i.r(l),i.d(l,{default:()=>m});var d=i(5043),o=i(6446),n=i(5439),t=i(1906),a=i(3216),r=i(9993),s=i(279),c=i(1944),h=i(5472),x=i(4256),u=i(5865),v=i(9336),p=i(579);const g=e=>{let{packageDetails:l}=e;return console.log("DATAPACKAGEIN:",JSON.stringify(l)),(0,p.jsxs)(o.A,{sx:{padding:3,borderRadius:2,backgroundColor:"#f5f5f5",marginTop:3},children:[(0,p.jsx)(u.A,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold",color:"#333"},children:"Package Details"}),(null===l||void 0===l?void 0:l.length)>0?l.map(((e,l)=>{var i,d,n,t,a,r,s,c,h,x;let{hotels:g=[]}=e;return(0,p.jsxs)(o.A,{sx:{marginBottom:4,padding:3,backgroundColor:"#fff",borderRadius:4,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",transition:"box-shadow 0.3s ease"},children:[(0,p.jsxs)(u.A,{variant:"h6",sx:{marginBottom:3,fontWeight:"bold",color:"#444"},children:["Package ",l+1]}),(0,p.jsxs)(o.A,{sx:{display:"flex",gap:4,marginBottom:3},children:[(0,p.jsx)(u.A,{sx:{fontWeight:"bold",color:"#555"},children:"Star Category:"}),(0,p.jsx)(u.A,{children:(null===e||void 0===e||null===(i=e.req)||void 0===i||null===(d=i.starCategory)||void 0===d?void 0:d.label)||"N/A"})]}),(0,p.jsx)(v.A,{sx:{marginBottom:3}}),(0,p.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column",gap:3,overflowX:"auto",whiteSpace:"nowrap"},children:[(0,p.jsxs)(o.A,{sx:{display:"flex",gap:3,padding:"8px 0",backgroundColor:"#fafafa",borderRadius:2},children:[(0,p.jsx)(o.A,{sx:{minWidth:160,fontWeight:"bold"}}),null===e||void 0===e||null===(n=e.hotels)||void 0===n?void 0:n.map(((e,l)=>(0,p.jsxs)(o.A,{sx:{minWidth:220,fontWeight:"bold",textAlign:"center",color:"#555",padding:"8px"},children:["Day ",l+1]},l)))]}),(0,p.jsxs)(o.A,{sx:{display:"flex",gap:3,padding:"8px 0"},children:[(0,p.jsx)(o.A,{sx:{minWidth:160,fontWeight:"bold",color:"#666"},children:"Hotel Name"}),null===e||void 0===e||null===(t=e.hotels)||void 0===t?void 0:t.map(((e,l)=>{var i;return(0,p.jsx)(o.A,{sx:{minWidth:220},children:null===e||void 0===e||null===(i=e.hotels)||void 0===i?void 0:i.map(((e,l)=>(0,p.jsx)(o.A,{sx:{textAlign:"center",color:"#444"},children:e.hotelName||"N/A"},l)))},l)}))]}),(0,p.jsxs)(o.A,{sx:{display:"flex",gap:3,padding:"8px 0",backgroundColor:"#f9f9f9",borderRadius:2},children:[(0,p.jsx)(o.A,{sx:{minWidth:160,fontWeight:"bold",color:"#666"},children:"Location"}),null===e||void 0===e||null===(a=e.hotels)||void 0===a?void 0:a.map(((e,l)=>{var i;return(0,p.jsx)(o.A,{sx:{minWidth:220},children:null===e||void 0===e||null===(i=e.hotels)||void 0===i?void 0:i.map(((e,l)=>(0,p.jsx)(o.A,{sx:{textAlign:"center",color:"#444"},children:e.location||"N/A"},l)))},l)}))]}),(0,p.jsxs)(o.A,{sx:{display:"flex",gap:3,padding:"8px 0"},children:[(0,p.jsx)(o.A,{sx:{minWidth:160,fontWeight:"bold",color:"#666"},children:"Room Name"}),null===e||void 0===e||null===(r=e.hotels)||void 0===r?void 0:r.map(((e,l)=>{var i;return(0,p.jsx)(o.A,{sx:{minWidth:220},children:null===e||void 0===e||null===(i=e.hotels)||void 0===i?void 0:i.map(((e,l)=>{var i;return(0,p.jsx)(o.A,{sx:{textAlign:"center",color:"#444"},children:null===e||void 0===e||null===(i=e.selectedRooms)||void 0===i?void 0:i.map(((e,l)=>(0,p.jsx)(o.A,{sx:{marginBottom:1},children:(null===e||void 0===e?void 0:e.roomName)||"N/A"},l)))},l)}))},l)}))]}),(0,p.jsxs)(o.A,{sx:{display:"flex",gap:3,padding:"8px 0",backgroundColor:"#f9f9f9",borderRadius:2},children:[(0,p.jsx)(o.A,{sx:{minWidth:160,fontWeight:"bold",color:"#666"},children:"Meal Plan (MP)"}),null===e||void 0===e||null===(s=e.hotels)||void 0===s?void 0:s.map(((e,l)=>{var i;return(0,p.jsx)(o.A,{sx:{minWidth:220},children:null===e||void 0===e||null===(i=e.hotels)||void 0===i?void 0:i.map(((e,l)=>{var i;return(0,p.jsx)(o.A,{sx:{textAlign:"center",color:"#444"},children:null===e||void 0===e||null===(i=e.selectedRooms)||void 0===i?void 0:i.map(((e,l)=>(0,p.jsx)(o.A,{sx:{marginBottom:1},children:(null===e||void 0===e?void 0:e.mp)||"N/A"},l)))},l)}))},l)}))]}),(0,p.jsxs)(o.A,{sx:{display:"flex",gap:3,padding:"8px 0"},children:[(0,p.jsx)(o.A,{sx:{minWidth:160,fontWeight:"bold",color:"#666"},children:"Adults"}),null===e||void 0===e||null===(c=e.hotels)||void 0===c?void 0:c.map(((e,l)=>{var i;return(0,p.jsx)(o.A,{sx:{minWidth:220},children:null===e||void 0===e||null===(i=e.hotels)||void 0===i?void 0:i.map(((e,l)=>{var i;return(0,p.jsx)(o.A,{sx:{textAlign:"center",color:"#444"},children:null===e||void 0===e||null===(i=e.selectedRooms)||void 0===i?void 0:i.map(((e,l)=>{var i;return(0,p.jsx)(o.A,{sx:{marginBottom:1},children:(null===e||void 0===e||null===(i=e.selectedOccupancy)||void 0===i?void 0:i.adults)||"N/A"},l)}))},l)}))},l)}))]}),(0,p.jsxs)(o.A,{sx:{display:"flex",gap:3,padding:"8px 0",backgroundColor:"#f9f9f9",borderRadius:2},children:[(0,p.jsx)(o.A,{sx:{minWidth:160,fontWeight:"bold",color:"#666"},children:"Child"}),null===e||void 0===e||null===(h=e.hotels)||void 0===h?void 0:h.map(((e,l)=>{var i;return(0,p.jsx)(o.A,{sx:{minWidth:220},children:null===e||void 0===e||null===(i=e.hotels)||void 0===i?void 0:i.map(((e,l)=>{var i;return(0,p.jsx)(o.A,{sx:{textAlign:"center",color:"#444"},children:null===e||void 0===e||null===(i=e.selectedRooms)||void 0===i?void 0:i.map(((e,l)=>{var i;return(0,p.jsx)(o.A,{sx:{marginBottom:1},children:(null===e||void 0===e||null===(i=e.selectedOccupancy)||void 0===i?void 0:i.child)||"N/A"},l)}))},l)}))},l)}))]}),(0,p.jsxs)(o.A,{sx:{display:"flex",gap:3,padding:"8px 0"},children:[(0,p.jsx)(o.A,{sx:{minWidth:160,fontWeight:"bold",color:"#666"},children:"Room Price"}),null===e||void 0===e||null===(x=e.hotels)||void 0===x?void 0:x.map(((e,l)=>{var i;return(0,p.jsx)(o.A,{sx:{minWidth:220},children:null===e||void 0===e||null===(i=e.hotels)||void 0===i?void 0:i.map(((e,l)=>{var i;return(0,p.jsx)(o.A,{sx:{textAlign:"center",color:"#444"},children:null===e||void 0===e||null===(i=e.selectedRooms)||void 0===i?void 0:i.map(((e,l)=>(0,p.jsx)(o.A,{sx:{marginBottom:1},children:(null===e||void 0===e?void 0:e.roomPrice)||"N/A"},l)))},l)}))},l)}))]})]})]},l)})):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(u.A,{variant:"body1",sx:{color:"#777",paddingTop:2},children:"No packages created for this Request!"}),(0,p.jsxs)(u.A,{variant:"body1",sx:{color:"#777",paddingTop:2},children:["Click ",(0,p.jsx)("b",{children:"Edit"})," to create package for this Request."]})]})]})},m=e=>{let{reqsList:l=[]}=e;const[i,u]=d.useState([]),[v,m]=d.useState(null),[A,f]=d.useState(null),[j,b]=d.useState(null),y=(0,a.Zp)();d.useEffect((()=>{l&&u(l.map((e=>e)))}),[l]);const w=[{field:"select",headerName:"",width:50,renderCell:e=>(0,p.jsx)(x.A,{checked:A===e.row.id,onChange:()=>(async(e,l)=>{if(f(e),null!==l&&void 0!==l&&l.length){const e=await Promise.all(l.map((async e=>{const l=(0,h.H9)(c.db,"packages",e),i=await(0,h.x7)(l);return i.exists()?i.data():{error:"No such document"}})));b(e)}else b(null)})(e.row.id,e.row.packages)})},{field:"createdAt",headerName:"Created On",width:150,editable:!1,valueGetter:(e,l)=>"".concat((0,r.A)(new Date(e),"dd-MMM-yyyy"))},{field:"destination",headerName:"Dest",width:150,editable:!0},{field:"startDate",headerName:"Travel Date",width:150,editable:!0,valueGetter:(e,l)=>"".concat((0,r.A)(new Date(e),"dd-MMM-yyyy"))},{field:"noOfNights",headerName:"Nights",type:"number",width:110,editable:!0},{field:"pickUp",headerName:"Pick Up",width:110,editable:!0},{field:"starCategory",headerName:"Hotel Category",width:110,editable:!0,valueGetter:e=>"".concat(null===e||void 0===e?void 0:e.label)},{field:"adultPax",headerName:"Adult",width:110,editable:!0},{field:"childPax",headerName:"Child",width:110,editable:!0},{field:"trackingId",headerName:"Tracking ID",width:110,editable:!0},{field:"",headerName:"Actions",width:250,editable:!0,renderCell:e=>e.row.reqId?(0,p.jsxs)("div",{children:[(0,p.jsx)(t.A,{size:"small",variant:"contained",color:"primary",onClick:()=>{return l=e.row.reqId,console.log("REQID: ",l),void y("/request/".concat(l,"/edit"));var l},children:"Edit"}),"\xa0",(0,p.jsx)(t.A,{size:"small",variant:"contained",color:"secondary",onClick:()=>{return l=e.row.reqId,console.log("REQID: ",l),void y("/request/".concat(l,"/copy-new"));var l},children:"Copy to New Package"})]}):null}];return(0,p.jsxs)(o.A,{sx:{margin:"auto",height:400,width:"100%"},children:[(0,p.jsx)(n.z,{rows:i,columns:w,initialState:{pagination:{paginationModel:{pageSize:5}}},pageSizeOptions:[7],disableRowSelectionOnClick:!0}),A&&(0,p.jsx)(s.A,{in:!!A,children:(0,p.jsx)(g,{packageDetails:j})})]})}}}]);
//# sourceMappingURL=300.38a00663.chunk.js.map