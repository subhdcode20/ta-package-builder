"use strict";(self.webpackChunkta_package_builder=self.webpackChunkta_package_builder||[]).push([[300],{2300:(e,i,l)=>{l.r(i),l.d(i,{default:()=>N});var d=l(5043),n=l(6446),o=l(1806),r=l(3460),s=l(2420),t=l(9650),a=l(4882),c=l(8076),x=l(1906),h=l(4256),u=l(279),v=l(3216),A=l(9993),j=l(207),g=l(2624),p=l(5865),f=l(5472),m=l(1944),b=l(889),y=l(6605),k=l(710),w=l(1337),P=l(9816),C=l(579);const W=e=>{let{packageDetails:i=[],reqData:l={}}=e;const{pickUp:d,cabType:o,dropLoc:r}=l||{},s=(0,v.Zp)();return console.log("PackageData render ",l),(0,C.jsxs)(n.A,{sx:{padding:3,marginTop:3,border:"1px solid #ddd",borderRadius:3,backgroundColor:"#f9f9f9",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"},children:[(0,C.jsx)(p.A,{variant:"h5",fontWeight:"bold",sx:{fontWeight:"bold",color:"#333",marginBottom:3,textAlign:"center"},children:"Selected Package Details"}),(null===i||void 0===i?void 0:i.length)>0?i.map(((e,i)=>{var l,s,t,a;const c=(null===e||void 0===e?void 0:e.reqId)||"",h=null!==e&&void 0!==e&&e.createdAt?(0,A.A)(new Date(e.createdAt),"dd-MM-yyyy"):"N/A";return console.log("PackageData render 22 ",e),(0,C.jsxs)(b.A,{sx:{marginBottom:2},children:[(0,C.jsx)(y.A,{expandIcon:(0,C.jsx)(w.A,{}),"aria-controls":"package-content-".concat(i),id:"package-header-".concat(i),children:(0,C.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",width:"100%"},children:[(0,C.jsxs)(p.A,{sx:{fontWeight:"bold",color:"#333"},children:["Package created on ",(0,C.jsxs)("b",{children:[" ",h," "]})]}),(0,C.jsx)(x.A,{variant:"contained",color:"primary",href:"/itinerary/".concat(c)||0,size:"small",sx:{marginLeft:2},children:"View PDF"})]})}),(0,C.jsxs)(k.A,{children:[(0,C.jsxs)(n.A,{sx:{overflowX:"auto",border:"1px solid #ddd",borderRadius:2,backgroundColor:"#fff"},children:[(0,C.jsxs)(n.A,{sx:{display:"flex",backgroundColor:"#f0f4f7",padding:2,fontWeight:"bold",borderBottom:"1px solid #ddd"},children:[(0,C.jsx)(n.A,{sx:{flex:1,minWidth:160},children:"Detail"}),null===e||void 0===e||null===(l=e.hotels)||void 0===l?void 0:l.map(((e,i)=>(0,C.jsxs)(n.A,{sx:{flex:1,minWidth:200,maxWidth:400,textAlign:"center",wordWrap:"break-word",fontSize:"0.95em",fontWeight:"600",color:"#444"},children:["Day ",i+1]},i)))]}),(0,C.jsxs)(n.A,{sx:{display:"flex",padding:2,borderBottom:"1px solid #ddd"},children:[(0,C.jsx)(n.A,{sx:{flex:1,minWidth:160,fontWeight:"bold",color:"#666"},children:"Hotel"}),null===e||void 0===e||null===(s=e.hotels)||void 0===s?void 0:s.map(((e,i)=>{var l;return(0,C.jsx)(n.A,{sx:{flex:1,minWidth:200,textAlign:"center",wordWrap:"break-word"},children:null===e||void 0===e||null===(l=e.hotels)||void 0===l?void 0:l.map(((e,i)=>(0,C.jsxs)(p.A,{sx:{color:"#333",fontWeight:"500"},children:[(null===e||void 0===e?void 0:e.hotelName)||"N/A",(null===e||void 0===e?void 0:e.starCategory)&&(0,C.jsxs)(p.A,{component:"span",sx:{fontSize:"0.85em",color:"#777",display:"block"},children:["(",null===e||void 0===e?void 0:e.starCategory,"\u2b50)"]})]},i)))},i)}))]}),(0,C.jsxs)(n.A,{sx:{display:"flex",padding:2,borderBottom:"1px solid #ddd"},children:[(0,C.jsx)(n.A,{sx:{flex:1,minWidth:160,fontWeight:"bold",color:"#666"},children:"Location"}),null===e||void 0===e||null===(t=e.hotels)||void 0===t?void 0:t.map(((e,i)=>{var l;return(0,C.jsx)(n.A,{sx:{flex:1,minWidth:200,textAlign:"center",wordWrap:"break-word"},children:null===e||void 0===e||null===(l=e.hotels)||void 0===l?void 0:l.map(((e,i)=>(0,C.jsx)(p.A,{sx:{color:"#555"},children:(null===e||void 0===e?void 0:e.location)||"N/A"},i)))},i)}))]}),(0,C.jsxs)(n.A,{sx:{display:"flex",padding:2},children:[(0,C.jsx)(n.A,{sx:{flex:1,minWidth:160,fontWeight:"bold",color:"#666"},children:"Room"}),null===e||void 0===e||null===(a=e.hotels)||void 0===a?void 0:a.map(((e,i)=>{var l;return(0,C.jsx)(n.A,{sx:{flex:1,minWidth:200,textAlign:"center",wordWrap:"break-word"},children:null===e||void 0===e||null===(l=e.hotels)||void 0===l?void 0:l.map(((e,i)=>{var l;return(0,C.jsx)(n.A,{sx:{padding:2},children:null===e||void 0===e||null===(l=e.selectedRooms)||void 0===l?void 0:l.map(((i,l)=>{var d,o,r;return(0,C.jsxs)(n.A,{sx:{borderBottom:l!==(null===e||void 0===e||null===(d=e.selectedRooms)||void 0===d?void 0:d.length)-1?"1px solid #ddd":"none",paddingBottom:2,marginBottom:2},children:[(0,C.jsx)(p.A,{sx:{color:"#444",fontWeight:"500"},children:(null===i||void 0===i?void 0:i.roomName)||"N/A"}),(0,C.jsx)(p.A,{sx:{fontSize:"0.85em",color:"#666"},children:(null===i||void 0===i?void 0:i.mp)||"N/A"}),(0,C.jsxs)(p.A,{sx:{fontSize:"0.85em",color:"#666"},children:[(null===i||void 0===i||null===(o=i.selectedOccupancy)||void 0===o?void 0:o.adults)||"0"," Adult,"," ",(null===i||void 0===i||null===(r=i.selectedOccupancy)||void 0===r?void 0:r.child)||"0"," Child"]})]},l)}))},i)}))},i)}))]})]}),(0,C.jsxs)(n.A,{sx:{border:"1px solid #ddd",borderRadius:2,padding:3,textAlign:"left",marginBottom:3,marginTop:3,backgroundColor:"#fff"},children:[(0,C.jsx)(p.A,{variant:"h6",sx:{fontWeight:"bold",color:"#444"},children:"Transfer Section"}),(0,C.jsxs)(p.A,{sx:{color:"#555",marginTop:1},children:["All tours and transfers are private by ",o||""," from ",d||""," dropping at ",r||""]})]}),(0,C.jsxs)(n.A,{sx:{border:"1px solid #ddd",borderRadius:2,padding:3,textAlign:"left",backgroundColor:"#fff"},children:[(0,C.jsx)(p.A,{variant:"h6",sx:{fontWeight:"bold",color:"#444",marginBottom:2},children:"Price Section"}),(null===e||void 0===e?void 0:e.finalTransferPrice)&&!(0,P.RI)(null===e||void 0===e?void 0:e.finalTransferPrice)&&!isNaN(null===e||void 0===e?void 0:e.finalTransferPrice)&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(p.A,{sx:{color:"#555",marginBottom:1},children:["Hotel Price: \u20b9",Number(null===e||void 0===e?void 0:e.finalPackPrice)-Number(null===e||void 0===e?void 0:e.finalTransferPrice)||"0"]}),(0,C.jsxs)(p.A,{sx:{color:"#555",marginBottom:1},children:["Transfer Price: \u20b9",(null===e||void 0===e?void 0:e.finalTransferPrice)||"0"]})]}),(0,C.jsxs)(p.A,{sx:{color:"#000",fontWeight:"bold"},children:["Total Package Price: \u20b9",(null===e||void 0===e?void 0:e.finalPackPrice)||"0"]})]})]})]},i)})):(0,C.jsxs)(n.A,{sx:{m:2,display:"flex",width:"max-content",justifyContent:"space-evenly"},children:[(0,C.jsx)(p.A,{variant:"body2",sx:{margin:"auto"},children:"No packages created for this Request! Try Fastest way to a professional Itinerary/Quote pdf"}),"\xa0",(0,C.jsx)(x.A,{size:"small",variant:"contained",onClick:()=>s("/itinerary/"+(null===l||void 0===l?void 0:l.reqId)),children:"Now!"})]})]})},N=e=>{let{reqsList:i=[]}=e;const[l,b]=d.useState([]),[y,k]=d.useState(null),[w,N]=d.useState(null),[D,T]=d.useState(null),[S,q]=d.useState(0),[I,B]=d.useState(5),z=(0,v.Zp)(),R=(0,P.zm)();d.useEffect((()=>{i&&b(i.map((e=>e)))}),[i]),d.useEffect((()=>{R&&R.get("reqId")&&l&&M(R.get("reqId"))}),[R,l]);const M=async e=>{k(e);const i=l.find((i=>i.id===e));if(!i)return;console.log("selected row ",i),T(i);let{packages:d=[]}=i;if(null!==d&&void 0!==d&&d.length){const e=await Promise.all(d.map((async e=>{const i=(0,f.H9)(m.db,"packages",e),l=await(0,f.x7)(i);return l.exists()?l.data():{error:"No such document"}})));N(e)}else N(null)};return(0,C.jsxs)(n.A,{sx:{margin:"auto",width:"100%",overflowX:"auto"},children:[(0,C.jsx)(t.A,{children:(0,C.jsxs)(o.A,{stickyHeader:!0,size:"small",children:[(0,C.jsx)(a.A,{children:(0,C.jsxs)(c.A,{children:[(0,C.jsx)(s.A,{children:(0,C.jsx)("b",{children:"Select"})}),(0,C.jsx)(s.A,{children:(0,C.jsx)("b",{children:"Created On"})}),(0,C.jsx)(s.A,{children:(0,C.jsx)("b",{children:"Dest"})}),(0,C.jsx)(s.A,{children:(0,C.jsx)("b",{children:"Travel Date"})}),(0,C.jsx)(s.A,{children:(0,C.jsx)("b",{children:"Nights"})}),(0,C.jsx)(s.A,{children:(0,C.jsx)("b",{children:"Pick Up"})}),(0,C.jsx)(s.A,{children:(0,C.jsx)("b",{children:"Hotel Category"})}),(0,C.jsx)(s.A,{children:(0,C.jsx)("b",{children:"Adult"})}),(0,C.jsx)(s.A,{children:(0,C.jsx)("b",{children:"Child"})}),(0,C.jsx)(s.A,{children:(0,C.jsx)("b",{children:"Tracking ID"})}),(0,C.jsx)(s.A,{children:(0,C.jsx)("b",{children:"Actions"})})]})}),0==l.length&&(0,C.jsxs)(n.A,{sx:{m:2,display:"flex",width:"max-content",justifyContent:"space-evenly"},children:[(0,C.jsx)(p.A,{variant:"body2",sx:{margin:"auto"},children:"No Requests Created Yet! Try Fastest way to a professional Itinerary/Quote pdf"}),(0,C.jsx)(x.A,{size:"small",variant:"text",onClick:()=>z("/home"),children:"Now!"})]}),(0,C.jsx)(r.A,{children:l.slice(S*I,S*I+I).map((e=>{var i;return(0,C.jsxs)(c.A,{children:[(0,C.jsx)(s.A,{children:(0,C.jsx)(h.A,{checked:(null===D||void 0===D?void 0:D.id)===e.id,onChange:()=>M(e.id,e.packages)})}),(0,C.jsx)(s.A,{children:(0,A.A)(new Date(e.createdAt),"dd-MMM-yyyy")}),(0,C.jsx)(s.A,{children:e.destination}),(0,C.jsx)(s.A,{children:(0,A.A)(new Date(e.startDate),"dd-MMM-yyyy")}),(0,C.jsx)(s.A,{children:e.noOfNights}),(0,C.jsx)(s.A,{children:e.pickUp}),(0,C.jsx)(s.A,{children:null===(i=e.starCategory)||void 0===i?void 0:i.label}),(0,C.jsx)(s.A,{children:e.adultPax}),(0,C.jsx)(s.A,{children:e.childPax}),(0,C.jsx)(s.A,{children:e.trackingId}),(0,C.jsxs)(s.A,{children:[(0,C.jsx)(x.A,{size:"small",variant:"contained",color:"primary",onClick:()=>{return i=e.reqId,void z("/request/".concat(i,"/edit"));var i},children:"Edit"}),"\xa0",((null===e||void 0===e?void 0:e.packages)||[]).length>0&&(0,C.jsx)(x.A,{size:"small",variant:"contained",color:"secondary",onClick:()=>{return i=e.reqId,void z("/request/".concat(i,"/copy-new"));var i},children:"Copy to New Package"})]})]},e.id)}))}),(0,C.jsx)(j.A,{children:(0,C.jsx)(c.A,{children:(0,C.jsx)(g.A,{rowsPerPageOptions:[5,10,15],count:l.length,rowsPerPage:I,page:S,onPageChange:(e,i)=>{q(i)},onRowsPerPageChange:e=>{B(parseInt(e.target.value,10)),q(0)}})})})]})}),D&&(0,C.jsx)(u.A,{in:!!D,children:(0,C.jsx)(W,{packageDetails:w,reqData:D})})]})}}}]);
//# sourceMappingURL=300.f6669ebe.chunk.js.map