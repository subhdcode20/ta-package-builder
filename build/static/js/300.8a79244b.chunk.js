"use strict";(self.webpackChunkta_package_builder=self.webpackChunkta_package_builder||[]).push([[300],{2300:(e,d,i)=>{i.r(d),i.d(d,{default:()=>D});var l=i(5043),o=i(6446),n=i(1806),r=i(3460),s=i(2420),t=i(9650),a=i(4882),c=i(8076),x=i(1906),h=i(4256),u=i(279),A=i(3216),j=i(9993),g=i(207),v=i(2624),p=i(5865),f=i(5472),m=i(1944),b=i(889),y=i(6605),k=i(710),w=i(1337),P=i(579);const W=e=>{let{packageDetails:d=[],reqData:i={}}=e;const{pickUp:l,cabType:n,dropLoc:r}=i||{};return console.log("PackageData render ",i),(0,P.jsxs)(o.A,{sx:{padding:3,marginTop:3,border:"1px solid #ddd",borderRadius:3,backgroundColor:"#f9f9f9",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"},children:[(0,P.jsx)(p.A,{variant:"h5",fontWeight:"bold",sx:{fontWeight:"bold",color:"#333",marginBottom:3,textAlign:"center"},children:"Selected Package Details"}),(null===d||void 0===d?void 0:d.length)>0?d.map(((e,d)=>{var i,s,t,a;const c=(null===e||void 0===e?void 0:e.reqId)||"",h=null!==e&&void 0!==e&&e.createdAt?(0,j.A)(new Date(e.createdAt),"dd-MM-yyyy"):"N/A";return(0,P.jsxs)(b.A,{sx:{marginBottom:2},children:[(0,P.jsx)(y.A,{expandIcon:(0,P.jsx)(w.A,{}),"aria-controls":"package-content-".concat(d),id:"package-header-".concat(d),children:(0,P.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",width:"100%"},children:[(0,P.jsxs)(p.A,{sx:{fontWeight:"bold",color:"#333"},children:["Package created on ",(0,P.jsxs)("b",{children:[" ",h," "]})]}),(0,P.jsx)(x.A,{variant:"contained",color:"primary",href:"/itinerary/".concat(c)||0,size:"small",sx:{marginLeft:2},children:"View PDF"})]})}),(0,P.jsxs)(k.A,{children:[(0,P.jsxs)(o.A,{sx:{overflowX:"auto",border:"1px solid #ddd",borderRadius:2,backgroundColor:"#fff"},children:[(0,P.jsxs)(o.A,{sx:{display:"flex",backgroundColor:"#f0f4f7",padding:2,fontWeight:"bold",borderBottom:"1px solid #ddd"},children:[(0,P.jsx)(o.A,{sx:{flex:1,minWidth:160},children:"Detail"}),null===e||void 0===e||null===(i=e.hotels)||void 0===i?void 0:i.map(((e,d)=>(0,P.jsxs)(o.A,{sx:{flex:1,minWidth:200,maxWidth:400,textAlign:"center",wordWrap:"break-word",fontSize:"0.95em",fontWeight:"600",color:"#444"},children:["Day ",d+1]},d)))]}),(0,P.jsxs)(o.A,{sx:{display:"flex",padding:2,borderBottom:"1px solid #ddd"},children:[(0,P.jsx)(o.A,{sx:{flex:1,minWidth:160,fontWeight:"bold",color:"#666"},children:"Hotel"}),null===e||void 0===e||null===(s=e.hotels)||void 0===s?void 0:s.map(((e,d)=>{var i;return(0,P.jsx)(o.A,{sx:{flex:1,minWidth:200,textAlign:"center",wordWrap:"break-word"},children:null===e||void 0===e||null===(i=e.hotels)||void 0===i?void 0:i.map(((e,d)=>(0,P.jsxs)(p.A,{sx:{color:"#333",fontWeight:"500"},children:[(null===e||void 0===e?void 0:e.hotelName)||"N/A",(null===e||void 0===e?void 0:e.starCategory)&&(0,P.jsxs)(p.A,{component:"span",sx:{fontSize:"0.85em",color:"#777",display:"block"},children:["(",null===e||void 0===e?void 0:e.starCategory,"\u2b50)"]})]},d)))},d)}))]}),(0,P.jsxs)(o.A,{sx:{display:"flex",padding:2,borderBottom:"1px solid #ddd"},children:[(0,P.jsx)(o.A,{sx:{flex:1,minWidth:160,fontWeight:"bold",color:"#666"},children:"Location"}),null===e||void 0===e||null===(t=e.hotels)||void 0===t?void 0:t.map(((e,d)=>{var i;return(0,P.jsx)(o.A,{sx:{flex:1,minWidth:200,textAlign:"center",wordWrap:"break-word"},children:null===e||void 0===e||null===(i=e.hotels)||void 0===i?void 0:i.map(((e,d)=>(0,P.jsx)(p.A,{sx:{color:"#555"},children:(null===e||void 0===e?void 0:e.location)||"N/A"},d)))},d)}))]}),(0,P.jsxs)(o.A,{sx:{display:"flex",padding:2},children:[(0,P.jsx)(o.A,{sx:{flex:1,minWidth:160,fontWeight:"bold",color:"#666"},children:"Room"}),null===e||void 0===e||null===(a=e.hotels)||void 0===a?void 0:a.map(((e,d)=>{var i;return(0,P.jsx)(o.A,{sx:{flex:1,minWidth:200,textAlign:"center",wordWrap:"break-word"},children:null===e||void 0===e||null===(i=e.hotels)||void 0===i?void 0:i.map(((e,d)=>{var i;return(0,P.jsx)(o.A,{sx:{padding:2},children:null===e||void 0===e||null===(i=e.selectedRooms)||void 0===i?void 0:i.map(((d,i)=>{var l,n,r;return(0,P.jsxs)(o.A,{sx:{borderBottom:i!==(null===e||void 0===e||null===(l=e.selectedRooms)||void 0===l?void 0:l.length)-1?"1px solid #ddd":"none",paddingBottom:2,marginBottom:2},children:[(0,P.jsx)(p.A,{sx:{color:"#444",fontWeight:"500"},children:(null===d||void 0===d?void 0:d.roomName)||"N/A"}),(0,P.jsx)(p.A,{sx:{fontSize:"0.85em",color:"#666"},children:(null===d||void 0===d?void 0:d.mp)||"N/A"}),(0,P.jsxs)(p.A,{sx:{fontSize:"0.85em",color:"#666"},children:[(null===d||void 0===d||null===(n=d.selectedOccupancy)||void 0===n?void 0:n.adults)||"0"," Adult,"," ",(null===d||void 0===d||null===(r=d.selectedOccupancy)||void 0===r?void 0:r.child)||"0"," Child"]})]},i)}))},d)}))},d)}))]})]}),(0,P.jsxs)(o.A,{sx:{border:"1px solid #ddd",borderRadius:2,padding:3,textAlign:"left",marginBottom:3,marginTop:3,backgroundColor:"#fff"},children:[(0,P.jsx)(p.A,{variant:"h6",sx:{fontWeight:"bold",color:"#444"},children:"Transfer Section"}),(0,P.jsxs)(p.A,{sx:{color:"#555",marginTop:1},children:["All tours and transfers are private by ",n||""," from ",l||""," dropping at ",r||""]})]}),(0,P.jsxs)(o.A,{sx:{border:"1px solid #ddd",borderRadius:2,padding:3,textAlign:"left",backgroundColor:"#fff"},children:[(0,P.jsx)(p.A,{variant:"h6",sx:{fontWeight:"bold",color:"#444",marginBottom:2},children:"Price Section"}),(0,P.jsxs)(p.A,{sx:{color:"#555",marginBottom:1},children:["Hotel Price: \u20b9",(null===e||void 0===e?void 0:e.finalPackPrice)-(null===e||void 0===e?void 0:e.finalTransferPrice)||"0"]}),(0,P.jsxs)(p.A,{sx:{color:"#555",marginBottom:1},children:["Transfer Price: \u20b9",(null===e||void 0===e?void 0:e.finalTransferPrice)||"0"]}),(0,P.jsxs)(p.A,{sx:{color:"#000",fontWeight:"bold"},children:["Total Package Price: \u20b9",(null===e||void 0===e?void 0:e.finalPackPrice)||"0"]})]})]})]},d)})):(0,P.jsx)(p.A,{variant:"body1",sx:{color:"#777",paddingTop:2},children:"No packages created for this Request!"})]})};var C=i(9816);const D=e=>{let{reqsList:d=[]}=e;const[i,b]=l.useState([]),[y,k]=l.useState(null),[w,D]=l.useState(null),[S,N]=l.useState(null),[T,q]=l.useState(0),[B,I]=l.useState(5),R=(0,A.Zp)(),z=(0,C.zm)();l.useEffect((()=>{d&&b(d.map((e=>e)))}),[d]),l.useEffect((()=>{z&&z.get("reqId")&&i&&M(z.get("reqId"))}),[z,i]);const M=async e=>{k(e);const d=i.find((d=>d.id===e));if(!d)return;console.log("selected row ",d),N(d);let{packages:l=[]}=d;if(null!==l&&void 0!==l&&l.length){const e=await Promise.all(l.map((async e=>{const d=(0,f.H9)(m.db,"packages",e),i=await(0,f.x7)(d);return i.exists()?i.data():{error:"No such document"}})));D(e)}else D(null)};return(0,P.jsxs)(o.A,{sx:{margin:"auto",width:"100%",overflowX:"auto"},children:[(0,P.jsx)(t.A,{children:(0,P.jsxs)(n.A,{stickyHeader:!0,children:[(0,P.jsx)(a.A,{children:(0,P.jsxs)(c.A,{children:[(0,P.jsx)(s.A,{children:(0,P.jsx)("b",{children:"Select"})}),(0,P.jsx)(s.A,{children:(0,P.jsx)("b",{children:"Created On"})}),(0,P.jsx)(s.A,{children:(0,P.jsx)("b",{children:"Dest"})}),(0,P.jsx)(s.A,{children:(0,P.jsx)("b",{children:"Travel Date"})}),(0,P.jsx)(s.A,{children:(0,P.jsx)("b",{children:"Nights"})}),(0,P.jsx)(s.A,{children:(0,P.jsx)("b",{children:"Pick Up"})}),(0,P.jsx)(s.A,{children:(0,P.jsx)("b",{children:"Hotel Category"})}),(0,P.jsx)(s.A,{children:(0,P.jsx)("b",{children:"Adult"})}),(0,P.jsx)(s.A,{children:(0,P.jsx)("b",{children:"Child"})}),(0,P.jsx)(s.A,{children:(0,P.jsx)("b",{children:"Tracking ID"})}),(0,P.jsx)(s.A,{children:(0,P.jsx)("b",{children:"Actions"})})]})}),0==i.length&&(0,P.jsxs)(o.A,{sx:{m:2,display:"flex",width:"max-content",justifyContent:"space-evenly"},children:[(0,P.jsx)(p.A,{variant:"body2",sx:{margin:"auto"},children:"No Requests Created Yet! Try Fastest way to a professional Itinerary/Quote pdf"}),(0,P.jsx)(x.A,{size:"small",variant:"text",onClick:()=>R("/home"),children:"Now!"})]}),(0,P.jsx)(r.A,{children:i.slice(T*B,T*B+B).map((e=>{var d;return(0,P.jsxs)(c.A,{children:[(0,P.jsx)(s.A,{children:(0,P.jsx)(h.A,{checked:(null===S||void 0===S?void 0:S.id)===e.id,onChange:()=>M(e.id,e.packages)})}),(0,P.jsx)(s.A,{children:(0,j.A)(new Date(e.createdAt),"dd-MMM-yyyy")}),(0,P.jsx)(s.A,{children:e.destination}),(0,P.jsx)(s.A,{children:(0,j.A)(new Date(e.startDate),"dd-MMM-yyyy")}),(0,P.jsx)(s.A,{children:e.noOfNights}),(0,P.jsx)(s.A,{children:e.pickUp}),(0,P.jsx)(s.A,{children:null===(d=e.starCategory)||void 0===d?void 0:d.label}),(0,P.jsx)(s.A,{children:e.adultPax}),(0,P.jsx)(s.A,{children:e.childPax}),(0,P.jsx)(s.A,{children:e.trackingId}),(0,P.jsxs)(s.A,{children:[(0,P.jsx)(x.A,{size:"small",variant:"contained",color:"primary",onClick:()=>{return d=e.reqId,void R("/request/".concat(d,"/edit"));var d},children:"Edit"}),"\xa0",(0,P.jsx)(x.A,{size:"small",variant:"contained",color:"secondary",onClick:()=>{return d=e.reqId,void R("/request/".concat(d,"/copy-new"));var d},children:"Copy to New Package"})]})]},e.id)}))}),(0,P.jsx)(g.A,{children:(0,P.jsx)(c.A,{children:(0,P.jsx)(v.A,{rowsPerPageOptions:[5,10,15],count:i.length,rowsPerPage:B,page:T,onPageChange:(e,d)=>{q(d)},onRowsPerPageChange:e=>{I(parseInt(e.target.value,10)),q(0)}})})})]})}),S&&(0,P.jsx)(u.A,{in:!!S,children:(0,P.jsx)(W,{packageDetails:w,reqData:S})})]})}}}]);
//# sourceMappingURL=300.8a79244b.chunk.js.map